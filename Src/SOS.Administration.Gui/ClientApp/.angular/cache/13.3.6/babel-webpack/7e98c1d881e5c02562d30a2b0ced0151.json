{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Injectable, EventEmitter, Directive, Input, Output, NgModule, Optional } from '@angular/core';\nimport { Chart, Title, Tooltip, Filler, Legend, LineController, LineElement, PointElement, LinearScale, CategoryScale, BarController, BarElement, DoughnutController, ArcElement, RadarController, RadialLinearScale, PieController, PolarAreaController, BubbleController, ScatterController, TimeSeriesScale, defaults } from 'chart.js';\nimport { distinctUntilChanged } from 'rxjs/operators';\nimport { merge } from 'lodash-es';\nimport { BehaviorSubject } from 'rxjs';\nlet ThemeService = /*#__PURE__*/(() => {\n  class ThemeService {\n    constructor() {\n      this.colorschemesOptions = new BehaviorSubject(undefined);\n    }\n\n    setColorschemesOptions(options) {\n      this.pColorschemesOptions = options;\n      this.colorschemesOptions.next(options);\n    }\n\n    getColorschemesOptions() {\n      return this.pColorschemesOptions;\n    }\n\n  }\n\n  ThemeService.ɵfac = function ThemeService_Factory(t) {\n    return new (t || ThemeService)();\n  };\n\n  ThemeService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n    token: ThemeService,\n    factory: ThemeService.ɵfac,\n    providedIn: 'root'\n  });\n  return ThemeService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet BaseChartDirective = /*#__PURE__*/(() => {\n  class BaseChartDirective {\n    constructor(element, zone, themeService) {\n      this.element = element;\n      this.zone = zone;\n      this.themeService = themeService;\n      this.type = 'bar';\n      this.plugins = [];\n      this.chartClick = new EventEmitter();\n      this.chartHover = new EventEmitter();\n      this.subs = [];\n      this.ctx = element.nativeElement.getContext('2d');\n      this.subs.push(this.themeService.colorschemesOptions.pipe(distinctUntilChanged()).subscribe(r => this.themeChanged(r)));\n    }\n\n    ngOnChanges(changes) {\n      const requireRender = ['type'];\n      const propertyNames = Object.getOwnPropertyNames(changes);\n\n      if (propertyNames.some(key => requireRender.includes(key)) || propertyNames.every(key => changes[key].isFirstChange())) {\n        this.render();\n      } else {\n        const config = this.getChartConfiguration();\n\n        if (this.chart) {\n          Object.assign(this.chart.config.data, config.data);\n          Object.assign(this.chart.config.plugins, config.plugins);\n          Object.assign(this.chart.config.options, config.options);\n        }\n\n        this.update();\n      }\n    }\n\n    ngOnDestroy() {\n      if (this.chart) {\n        this.chart.destroy();\n        this.chart = void 0;\n      }\n\n      this.subs.forEach(s => s.unsubscribe());\n    }\n\n    render() {\n      if (this.chart) {\n        this.chart.destroy();\n      }\n\n      return this.zone.runOutsideAngular(() => this.chart = new Chart(this.ctx, this.getChartConfiguration()));\n    }\n\n    update(duration) {\n      if (this.chart) {\n        this.zone.runOutsideAngular(() => {\n          var _a;\n\n          return (_a = this.chart) === null || _a === void 0 ? void 0 : _a.update(duration);\n        });\n      }\n    }\n\n    hideDataset(index, hidden) {\n      if (this.chart) {\n        this.chart.getDatasetMeta(index).hidden = hidden;\n        this.update();\n      }\n    }\n\n    isDatasetHidden(index) {\n      var _a, _b;\n\n      return (_b = (_a = this.chart) === null || _a === void 0 ? void 0 : _a.getDatasetMeta(index)) === null || _b === void 0 ? void 0 : _b.hidden;\n    }\n\n    toBase64Image() {\n      var _a;\n\n      return (_a = this.chart) === null || _a === void 0 ? void 0 : _a.toBase64Image();\n    }\n\n    themeChanged(options) {\n      this.themeOverrides = options;\n\n      if (this.chart) {\n        Object.assign(this.chart.config.options, this.getChartOptions());\n        this.update();\n      }\n    }\n\n    getChartOptions() {\n      return merge({\n        onHover: (event, active) => {\n          if (active && !active.length) {\n            return;\n          }\n\n          this.chartHover.emit({\n            event,\n            active\n          });\n        },\n        onClick: (event, active) => {\n          this.chartClick.emit({\n            event,\n            active\n          });\n        }\n      }, this.themeOverrides, this.options, {\n        plugins: {\n          legend: {\n            display: this.legend\n          }\n        }\n      });\n    }\n\n    getChartConfiguration() {\n      return {\n        type: this.type,\n        data: this.getChartData(),\n        plugins: this.plugins,\n        options: this.getChartOptions()\n      };\n    }\n\n    getChartData() {\n      return this.data ? this.data : {\n        labels: this.labels || [],\n        datasets: this.datasets || []\n      };\n    }\n\n  }\n\n  BaseChartDirective.ɵfac = function BaseChartDirective_Factory(t) {\n    return new (t || BaseChartDirective)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(ThemeService));\n  };\n\n  BaseChartDirective.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: BaseChartDirective,\n    selectors: [[\"canvas\", \"baseChart\", \"\"]],\n    inputs: {\n      type: \"type\",\n      legend: \"legend\",\n      data: \"data\",\n      options: \"options\",\n      plugins: \"plugins\",\n      labels: \"labels\",\n      datasets: \"datasets\"\n    },\n    outputs: {\n      chartClick: \"chartClick\",\n      chartHover: \"chartHover\"\n    },\n    exportAs: [\"base-chart\"],\n    features: [i0.ɵɵNgOnChangesFeature]\n  });\n  return BaseChartDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nconst baseColors = [[255, 99, 132], [54, 162, 235], [255, 206, 86], [231, 233, 237], [75, 192, 192], [151, 187, 205], [220, 220, 220], [247, 70, 74], [70, 191, 189], [253, 180, 92], [148, 159, 177], [77, 83, 96]];\nconst builtInDefaults = {\n  datasets: {\n    line: {\n      backgroundColor: context => rgba(generateColor(context.datasetIndex), 0.4),\n      borderColor: context => rgba(generateColor(context.datasetIndex), 1),\n      pointBackgroundColor: context => rgba(generateColor(context.datasetIndex), 1),\n      pointBorderColor: '#fff',\n      pointHoverBackgroundColor: '#fff',\n      pointHoverBorderColor: context => rgba(generateColor(context.datasetIndex), 0.8)\n    },\n    bar: {\n      backgroundColor: context => rgba(generateColor(context.datasetIndex), 0.6),\n      borderColor: context => rgba(generateColor(context.datasetIndex), 1),\n      hoverBackgroundColor: context => rgba(generateColor(context.datasetIndex), 0.8),\n      hoverBorderColor: context => rgba(generateColor(context.datasetIndex), 1)\n    },\n\n    get radar() {\n      return this.line;\n    },\n\n    doughnut: {\n      backgroundColor: context => rgba(generateColor(context.dataIndex), 0.6),\n      borderColor: '#fff',\n      hoverBackgroundColor: context => rgba(generateColor(context.dataIndex), 1),\n      hoverBorderColor: context => rgba(generateColor(context.dataIndex), 1)\n    },\n\n    get pie() {\n      return this.doughnut;\n    },\n\n    polarArea: {\n      backgroundColor: context => rgba(generateColor(context.dataIndex), 0.6),\n      borderColor: context => rgba(generateColor(context.dataIndex), 1),\n      hoverBackgroundColor: context => rgba(generateColor(context.dataIndex), 0.8),\n      hoverBorderColor: context => rgba(generateColor(context.dataIndex), 1)\n    },\n\n    get bubble() {\n      return this.doughnut;\n    },\n\n    get scatter() {\n      return this.doughnut;\n    },\n\n    get area() {\n      return this.polarArea;\n    }\n\n  }\n};\n\nfunction rgba(colour, alpha) {\n  return 'rgba(' + colour.concat(alpha).join(',') + ')';\n}\n\nfunction getRandomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nfunction getRandomColor() {\n  return [getRandomInt(0, 255), getRandomInt(0, 255), getRandomInt(0, 255)];\n}\n/**\n * Generate colors\n */\n\n\nfunction generateColor(index = 0) {\n  return baseColors[index] || getRandomColor();\n}\n\nChart.register(Title, Tooltip, Filler, Legend, LineController, LineElement, PointElement, LinearScale, CategoryScale, BarController, BarElement, DoughnutController, ArcElement, RadarController, RadialLinearScale, PieController, PolarAreaController, BubbleController, ScatterController, TimeSeriesScale);\nlet NgChartsConfiguration = /*#__PURE__*/(() => {\n  class NgChartsConfiguration {}\n\n  NgChartsConfiguration.ɵfac = function NgChartsConfiguration_Factory(t) {\n    return new (t || NgChartsConfiguration)();\n  };\n\n  NgChartsConfiguration.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n    token: NgChartsConfiguration,\n    factory: NgChartsConfiguration.ɵfac,\n    providedIn: 'root'\n  });\n  return NgChartsConfiguration;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NgChartsModule = /*#__PURE__*/(() => {\n  class NgChartsModule {\n    constructor(config) {\n      if (config === null || config === void 0 ? void 0 : config.plugins) Chart.register(...(config === null || config === void 0 ? void 0 : config.plugins));\n      const ngChartsDefaults = merge(builtInDefaults, (config === null || config === void 0 ? void 0 : config.defaults) || {});\n      defaults.set(ngChartsDefaults);\n    }\n\n    static forRoot(config) {\n      return {\n        ngModule: NgChartsModule,\n        providers: [{\n          provide: NgChartsConfiguration,\n          useValue: config\n        }]\n      };\n    }\n\n  }\n\n  NgChartsModule.ɵfac = function NgChartsModule_Factory(t) {\n    return new (t || NgChartsModule)(i0.ɵɵinject(NgChartsConfiguration, 8));\n  };\n\n  NgChartsModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: NgChartsModule\n  });\n  NgChartsModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n    imports: [[]]\n  });\n  return NgChartsModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * Public API Surface of ng2-charts\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { BaseChartDirective, NgChartsConfiguration, NgChartsModule, ThemeService, baseColors }; //# sourceMappingURL=ng2-charts.mjs.map","map":null,"metadata":{},"sourceType":"module"}