{"ast":null,"code":"import { HttpClient } from '@angular/common/http';\nimport { DataProvider } from '../models/dataprovider';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\n\nfunction InvalidObservationsComponent_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"(active)\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction InvalidObservationsComponent_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"(active)\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction InvalidObservationsComponent_div_11_option_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const dataSet_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", dataSet_r4.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(dataSet_r4.name);\n  }\n}\n\nfunction InvalidObservationsComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 0)(1, \"label\", 9);\n    i0.ɵɵtext(2, \" Select data source filter \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"select\", 10);\n    i0.ɵɵlistener(\"change\", function InvalidObservationsComponent_div_11_Template_select_change_3_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.onChange($event.target.value);\n    })(\"ngModelChange\", function InvalidObservationsComponent_div_11_Template_select_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.selectedDataSetId = $event;\n    });\n    i0.ɵɵtemplate(4, InvalidObservationsComponent_div_11_option_4_Template, 2, 2, \"option\", 11);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.selectedDataSetId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.dataSets);\n  }\n}\n\nexport let InvalidObservationsComponent = /*#__PURE__*/(() => {\n  class InvalidObservationsComponent {\n    constructor(http, baseUrl) {\n      this.dataSets = [];\n      this.selectedDataSet = new DataProvider();\n      this.selectedDataSetId = -1;\n      this._selectedInstance = \"0\";\n      this.activeInstance = \"0\";\n      this.loadingData = false;\n      this.http = http;\n      this.baseUrl = baseUrl;\n      this.selectedDataSet.id = -1;\n      this.selectedDataSet.name = \"\";\n      this.updateActiveInstance();\n      this.updateProviders();\n    }\n\n    get selectedInstance() {\n      return this._selectedInstance;\n    }\n\n    set selectedInstance(id) {\n      this._selectedInstance = id;\n    }\n\n    onChange(event) {\n      this.selectedDataSet = this.dataSets.find(p => p.id == event);\n      this.selectedDataSetId = this.selectedDataSet.id;\n    }\n\n    updateActiveInstance() {\n      this.http.get(this.baseUrl + 'statusinfo/activeinstance').subscribe(result => {\n        this.selectedInstance = result.activeInstance.toString();\n        this.activeInstance = this.selectedInstance;\n      }, error => console.error(error));\n    }\n\n    updateProviders() {\n      this.dataSets = [];\n      this.http.get(this.baseUrl + 'dataprovider/').subscribe(result => {\n        this.dataSets = result;\n        var all = new DataProvider();\n        all.id = 0;\n        all.name = \"All (warning, slow!)\";\n        this.dataSets.push(all);\n        var none = new DataProvider();\n        none.id = -1;\n        none.name = \"\";\n        this.dataSets.push(none);\n        this.dataSets = this.dataSets.sort((a, b) => {\n          return a.id - b.id;\n        });\n      }, error => console.error(error));\n    }\n\n  }\n\n  InvalidObservationsComponent.ɵfac = function InvalidObservationsComponent_Factory(t) {\n    return new (t || InvalidObservationsComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject('BASE_URL'));\n  };\n\n  InvalidObservationsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: InvalidObservationsComponent,\n    selectors: [[\"app-fetch-data\"]],\n    decls: 14,\n    vars: 9,\n    consts: [[1, \"form-group\"], [1, \"form-check\", \"form-check-inline\"], [\"type\", \"radio\", \"name\", \"instance-radios\", \"id\", \"instance0\", \"value\", \"0\", 1, \"form-check-input\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"instance0\", 1, \"form-check-label\"], [4, \"ngIf\"], [\"type\", \"radio\", \"name\", \"instance-radios\", \"id\", \"instance1\", \"value\", \"1\", 1, \"form-check-input\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"instance1\", 1, \"form-check-label\"], [\"class\", \"form-group\", 4, \"ngIf\"], [3, \"dataSetId\", \"instance\"], [\"for\", \"contactMethod\"], [\"name\", \"contactMethod\", \"id\", \"contactMethod\", 1, \"form-control\", 3, \"ngModel\", \"change\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"]],\n    template: function InvalidObservationsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"input\", 2);\n        i0.ɵɵlistener(\"ngModelChange\", function InvalidObservationsComponent_Template_input_ngModelChange_2_listener($event) {\n          return ctx.selectedInstance = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"label\", 3);\n        i0.ɵɵtext(4, \"InvalidObservations-0 \");\n        i0.ɵɵtemplate(5, InvalidObservationsComponent_span_5_Template, 2, 0, \"span\", 4);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(6, \"div\", 1)(7, \"input\", 5);\n        i0.ɵɵlistener(\"ngModelChange\", function InvalidObservationsComponent_Template_input_ngModelChange_7_listener($event) {\n          return ctx.selectedInstance = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"label\", 6);\n        i0.ɵɵtext(9, \"InvalidObservations-1 \");\n        i0.ɵɵtemplate(10, InvalidObservationsComponent_span_10_Template, 2, 0, \"span\", 4);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(11, InvalidObservationsComponent_div_11_Template, 5, 2, \"div\", 7);\n        i0.ɵɵelement(12, \"app-invalid-map\", 8)(13, \"app-invalid-grid\", 8);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.selectedInstance);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.activeInstance == \"0\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngModel\", ctx.selectedInstance);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.activeInstance == \"1\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.dataSets.length > 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"dataSetId\", ctx.selectedDataSet.id)(\"instance\", ctx.selectedInstance);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"dataSetId\", ctx.selectedDataSet.id)(\"instance\", ctx.selectedInstance);\n      }\n    },\n    encapsulation: 2\n  });\n  return InvalidObservationsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}